
# Yum install #
yum -y update
yum -y groupinstall "Development Tools"
yum -y install git nginx

# Top level dirs #

mkdir /kfly
mkdir /data
(future: /data might be a symlink to a separate volume)

# Git Checkout #

cd /kfly
git init
git remote add origin https://XXX@github.com/andyfischer/kidfriendly.git
  (where XXX is a token generated from Github.com)

Change .git/config to have:

[receive]
    denyCurrentBranch=false

# Building Node #

cd /kfly/3rdparty
wget http://nodejs.org/dist/v0.10.31/node-v0.10.31.tar.gz
cd node-v0.10.31
sudo ./configure
sudo make
sudo make install

# Dev user account #

Add this to .bash_profile: PATH=$PATH:/kfly/server/bin

Install global node modules:

sudo npm install -g coffee-script grunt-cli

# Sudo setup #

sudo visudo
(add /usr/local/bin to secure_path)

# Symlinks #

  /etc/init/forever.conf -> /kfly/server/scripts/forever.conf
  /etc/profile.d/kfly.sh -> /kfly/server/scripts/profile.d.sh
  /etc/nginx/conf.d/kfly.conf -> /kfly/server/scripts/nginx.conf

# Updating upstart configuration #

sudo initctl reload-configuration

or just: ~/bin/init-reload

# Starting forever #
sudo start forever

# Postgres #
yum localinstall http://yum.postgresql.org/9.3/redhat/rhel-6-x86_64/pgdg-centos93-9.3-1.noarch.rpm
